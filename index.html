<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Present</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }
        .gift {
            background-image: url('gift.png');
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
    </style>
</head>
<body>
    <div class="gift"></div>
    <img id="layer4" class="layer" src="wrapping4.png">
    <img id="layer3" class="layer" src="wrapping3.png">
    <img id="layer2" class="layer" src="wrapping2.png">
    <img id="layer1" class="layer" src="wrapping1.png">

    <audio id="introSound" src="cueintro.mp3"></audio>
    <audio id="sound1" src="cue1.mp3"></audio>
    <audio id="sound2" src="cue2.mp3"></audio>
    <audio id="sound3" src="cue3.mp3"></audio>
    <audio id="sound4" src="cue4.mp3"></audio>

    <script>
        document.getElementById('introSound').play();

        const layers = [
            { id: 'layer1', direction: 'right', sound: 'sound1', played: false },
            { id: 'layer2', direction: 'left', sound: 'sound2', played: false },
            { id: 'layer3', direction: 'up', sound: 'sound3', played: false },
            { id: 'layer4', direction: 'down', sound: 'sound4', played: false }
        ];

        layers.forEach((layer, index) => {
            const element = document.getElementById(layer.id);
            let startX, startY, initialX, initialY;

            element.addEventListener('mousedown', startDrag);
            element.addEventListener('touchstart', startDrag);

            function startDrag(e) {
                e.preventDefault();
                if (e.type === 'mousedown') {
                    startX = e.clientX;
                    startY = e.clientY;
                    document.addEventListener('mousemove', drag);
                    document.addEventListener('mouseup', endDrag);
                } else {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    document.addEventListener('touchmove', drag);
                    document.addEventListener('touchend', endDrag);
                }
                initialX = element.offsetLeft;
                initialY = element.offsetTop;

                if (!layer.played) {
                    document.getElementById(layer.sound).play();
                    layer.played = true;
                }
            }

            function drag(e) {
                e.preventDefault();
                let currentX, currentY;

                if (e.type === 'mousemove') {
                    currentX = e.clientX;
                    currentY = e.clientY;
                } else {
                    currentX = e.touches[0].clientX;
                    currentY = e.touches[0].clientY;
                }

                const deltaX = currentX - startX;
                const deltaY = currentY - startY;

                if (layer.direction === 'up') {
                    const newY = Math.min(initialY + deltaY, initialY);
                    element.style.top = `${newY}px`;
                    if (deltaY < -window.innerHeight) removeLayer(index);
                } else if (layer.direction === 'down') {
                    const newY = Math.max(initialY + deltaY, initialY);
                    element.style.top = `${newY}px`;
                    if (deltaY > window.innerHeight) removeLayer(index);
                } else if (layer.direction === 'left') {
                    const newX = Math.min(initialX + deltaX, initialX);
                    element.style.left = `${newX}px`;
                    if (deltaX < -window.innerWidth) removeLayer(index);
                } else if (layer.direction === 'right') {
                    const newX = Math.max(initialX + deltaX, initialX);
                    element.style.left = `${newX}px`;
                    if (deltaX > window.innerWidth) removeLayer(index);
                }
            }

            function endDrag() {
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', endDrag);
                document.removeEventListener('touchmove', drag);
                document.removeEventListener('touchend', endDrag);
            }

            function removeLayer(index) {
                const element = document.getElementById(layers[index].id);
                element.style.display = 'none';
            }
        });
    </script>
</body>
</html>
